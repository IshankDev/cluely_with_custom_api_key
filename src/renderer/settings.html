<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="AI Overlay Assistant - Settings" />
    <title>AI Overlay Assistant - Settings</title>
    <link rel="stylesheet" href="styles.css" />
    <style>
      /* Modern Settings Window Styles */
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        margin: 0;
        padding: 0;
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
        overflow: hidden;
        color: #333;
        min-height: 100vh;
      }

      .settings-container {
        max-width: 100%;
        height: 100vh;
        overflow-y: auto;
        padding: 0;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      }

      /* Header */
      .settings-header {
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(20px);
        border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        padding: 24px 32px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        position: sticky;
        top: 0;
        z-index: 100;
      }

      .settings-title {
        font-size: 28px;
        font-weight: 700;
        color: #2c3e50;
        margin: 0;
        display: flex;
        align-items: center;
        gap: 12px;
      }

      .settings-title::before {
        content: "⚙️";
        font-size: 32px;
      }

      .connection-status {
        display: flex;
        align-items: center;
        gap: 12px;
        padding: 12px 20px;
        background: rgba(255, 255, 255, 0.9);
        border-radius: 50px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        font-weight: 500;
        color: #2c3e50;
      }

      .status-dot {
        width: 12px;
        height: 12px;
        border-radius: 50%;
        background: #e74c3c;
        animation: pulse 2s infinite;
      }

      .status-dot.connected {
        background: #27ae60;
      }

      .status-dot.processing {
        background: #f39c12;
      }

      @keyframes pulse {
        0% { opacity: 1; }
        50% { opacity: 0.5; }
        100% { opacity: 1; }
      }

      /* Main Content */
      .settings-content {
        padding: 32px;
        max-width: 1400px;
        margin: 0 auto;
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
        gap: 24px;
        overflow-y: auto;
        max-height: calc(100vh - 200px);
        scrollbar-width: thin;
        scrollbar-color: rgba(102, 126, 234, 0.3) transparent;
      }

      /* Custom Scrollbar for Webkit browsers */
      .settings-content::-webkit-scrollbar {
        width: 8px;
      }

      .settings-content::-webkit-scrollbar-track {
        background: rgba(255, 255, 255, 0.1);
        border-radius: 4px;
      }

      .settings-content::-webkit-scrollbar-thumb {
        background: linear-gradient(135deg, rgba(102, 126, 234, 0.6), rgba(118, 75, 162, 0.6));
        border-radius: 4px;
        transition: background 0.3s ease;
      }

      .settings-content::-webkit-scrollbar-thumb:hover {
        background: linear-gradient(135deg, rgba(102, 126, 234, 0.8), rgba(118, 75, 162, 0.8));
      }

      /* Settings Cards */
      .settings-section {
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(20px);
        border-radius: 20px;
        padding: 32px;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        border: 1px solid rgba(255, 255, 255, 0.2);
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
        max-height: 500px;
        overflow-y: auto;
        scrollbar-width: thin;
        scrollbar-color: rgba(102, 126, 234, 0.3) transparent;
      }

      /* Custom Scrollbar for Settings Sections */
      .settings-section::-webkit-scrollbar {
        width: 6px;
      }

      .settings-section::-webkit-scrollbar-track {
        background: rgba(255, 255, 255, 0.1);
        border-radius: 3px;
        margin: 4px 0;
      }

      .settings-section::-webkit-scrollbar-thumb {
        background: linear-gradient(135deg, rgba(102, 126, 234, 0.5), rgba(118, 75, 162, 0.5));
        border-radius: 3px;
        transition: background 0.3s ease;
      }

      .settings-section::-webkit-scrollbar-thumb:hover {
        background: linear-gradient(135deg, rgba(102, 126, 234, 0.7), rgba(118, 75, 162, 0.7));
      }

      /* Scrollable Section Indicator */
      .settings-section.scrollable::after {
        content: '';
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        height: 20px;
        background: linear-gradient(to top, rgba(255, 255, 255, 0.8), transparent);
        pointer-events: none;
        border-radius: 0 0 20px 20px;
      }

      .settings-section::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 4px;
        background: linear-gradient(90deg, #667eea, #764ba2);
        border-radius: 20px 20px 0 0;
      }

      .settings-section:hover {
        transform: translateY(-4px);
        box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
      }

      .section-title {
        font-size: 22px;
        font-weight: 700;
        color: #2c3e50;
        margin-bottom: 24px;
        display: flex;
        align-items: center;
        gap: 12px;
        padding-bottom: 16px;
        border-bottom: 2px solid #ecf0f1;
      }

      /* Form Groups */
      .form-group {
        margin-bottom: 24px;
      }

      .form-label {
        display: block;
        font-size: 16px;
        font-weight: 600;
        color: #2c3e50;
        margin-bottom: 12px;
        letter-spacing: 0.5px;
      }

      .form-input {
        width: 100%;
        padding: 16px 20px;
        border: 2px solid #ecf0f1;
        border-radius: 12px;
        font-size: 16px;
        background: rgba(255, 255, 255, 0.8);
        color: #2c3e50;
        transition: all 0.3s ease;
        font-weight: 500;
      }

      .form-input:focus {
        outline: none;
        border-color: #667eea;
        box-shadow: 0 0 0 4px rgba(102, 126, 234, 0.1);
        background: rgba(255, 255, 255, 0.95);
      }

      .form-input::placeholder {
        color: #95a5a6;
        font-weight: 400;
      }

      /* Radio Groups */
      .radio-group {
        display: flex;
        flex-direction: column;
        gap: 16px;
        max-height: 300px;
        overflow-y: auto;
        scrollbar-width: thin;
        scrollbar-color: rgba(102, 126, 234, 0.2) transparent;
        padding-right: 8px;
      }

      /* Custom Scrollbar for Radio Groups */
      .radio-group::-webkit-scrollbar {
        width: 4px;
      }

      .radio-group::-webkit-scrollbar-track {
        background: rgba(255, 255, 255, 0.05);
        border-radius: 2px;
        margin: 2px 0;
      }

      .radio-group::-webkit-scrollbar-thumb {
        background: linear-gradient(135deg, rgba(102, 126, 234, 0.4), rgba(118, 75, 162, 0.4));
        border-radius: 2px;
        transition: background 0.3s ease;
      }

      .radio-group::-webkit-scrollbar-thumb:hover {
        background: linear-gradient(135deg, rgba(102, 126, 234, 0.6), rgba(118, 75, 162, 0.6));
      }

      .radio-label {
        display: flex;
        align-items: center;
        gap: 16px;
        padding: 20px;
        border: 2px solid #ecf0f1;
        border-radius: 16px;
        cursor: pointer;
        transition: all 0.3s ease;
        background: rgba(255, 255, 255, 0.8);
        position: relative;
        overflow: hidden;
      }

      .radio-label::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(135deg, rgba(102, 126, 234, 0.1), rgba(118, 75, 162, 0.1));
        opacity: 0;
        transition: opacity 0.3s ease;
      }

      .radio-label:hover {
        border-color: #667eea;
        background: rgba(255, 255, 255, 0.95);
        transform: translateX(4px);
      }

      .radio-label:hover::before {
        opacity: 1;
      }

      .radio-label input[type="radio"] {
        margin: 0;
        width: 20px;
        height: 20px;
        accent-color: #667eea;
      }

      .radio-label input[type="radio"]:checked + span {
        font-weight: 600;
        color: #667eea;
      }

      /* Checkbox Labels */
      .checkbox-label {
        display: flex;
        align-items: center;
        gap: 16px;
        padding: 20px;
        border: 2px solid #ecf0f1;
        border-radius: 16px;
        cursor: pointer;
        transition: all 0.3s ease;
        background: rgba(255, 255, 255, 0.8);
        margin-bottom: 16px;
        position: relative;
        overflow: hidden;
      }

      .checkbox-label::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(135deg, rgba(102, 126, 234, 0.1), rgba(118, 75, 162, 0.1));
        opacity: 0;
        transition: opacity 0.3s ease;
      }

      .checkbox-label:hover {
        border-color: #667eea;
        background: rgba(255, 255, 255, 0.95);
        transform: translateX(4px);
      }

      .checkbox-label:hover::before {
        opacity: 1;
      }

      .checkbox-label input[type="checkbox"] {
        margin: 0;
        width: 20px;
        height: 20px;
        accent-color: #667eea;
      }

      .checkbox-label input[type="checkbox"]:checked + span {
        font-weight: 600;
        color: #667eea;
      }

      /* Status Indicators */
      .status-indicator {
        display: flex;
        align-items: center;
        gap: 12px;
        padding: 16px 20px;
        background: rgba(255, 255, 255, 0.9);
        border-radius: 12px;
        margin-bottom: 16px;
      }

      /* Status List Container */
      .status-list {
        max-height: 200px;
        overflow-y: auto;
        scrollbar-width: thin;
        scrollbar-color: rgba(102, 126, 234, 0.2) transparent;
        padding-right: 8px;
      }

      /* Custom Scrollbar for Status Lists */
      .status-list::-webkit-scrollbar {
        width: 4px;
      }

      .status-list::-webkit-scrollbar-track {
        background: rgba(255, 255, 255, 0.05);
        border-radius: 2px;
        margin: 2px 0;
      }

      .status-list::-webkit-scrollbar-thumb {
        background: linear-gradient(135deg, rgba(102, 126, 234, 0.4), rgba(118, 75, 162, 0.4));
        border-radius: 2px;
        transition: background 0.3s ease;
      }

      .status-list::-webkit-scrollbar-thumb:hover {
        background: linear-gradient(135deg, rgba(102, 126, 234, 0.6), rgba(118, 75, 162, 0.6));
      }
        border-radius: 12px;
        font-size: 14px;
        color: #2c3e50;
        font-weight: 500;
        border: 1px solid #ecf0f1;
        margin-top: 16px;
      }

      /* Action Buttons */
      .action-buttons {
        display: flex;
        gap: 16px;
        justify-content: flex-end;
        margin-top: 32px;
        padding-top: 24px;
        border-top: 2px solid #ecf0f1;
      }

      .btn {
        padding: 12px 24px;
        border: 2px solid #ecf0f1;
        border-radius: 16px;
        font-size: 13px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        background: rgba(255, 255, 255, 0.95);
        color: #2c3e50;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        position: relative;
        overflow: hidden;
        font-family: 'SF Pro Display', -apple-system, BlinkMacSystemFont, sans-serif;
        min-width: 120px;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 6px;
      }

      .btn::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
        transition: left 0.6s cubic-bezier(0.4, 0, 0.2, 1);
      }

      .btn:hover::before {
        left: 100%;
      }

      .btn:hover {
        background: rgba(255, 255, 255, 1);
        border-color: #667eea;
        transform: translateY(-3px) scale(1.02);
        box-shadow: 0 12px 35px rgba(102, 126, 234, 0.25);
        color: #667eea;
      }

      .btn:active {
        transform: scale(0.98);
      }

      .btn-primary {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        border-color: transparent;
        box-shadow: 0 8px 25px rgba(102, 126, 234, 0.35);
      }

      .btn-primary:hover {
        background: linear-gradient(135deg, #5a6fd8 0%, #6a4190 100%);
        transform: translateY(-3px) scale(1.02);
        box-shadow: 0 12px 35px rgba(102, 126, 234, 0.45);
      }

      .btn-cancel {
        background: linear-gradient(135deg, #ff6b6b 0%, #ee5a52 100%);
        color: white;
        border-color: transparent;
        box-shadow: 0 8px 25px rgba(255, 107, 107, 0.35);
      }

      .btn-cancel:hover {
        background: linear-gradient(135deg, #ff5252 0%, #d32f2f 100%);
        transform: translateY(-3px) scale(1.02);
        box-shadow: 0 12px 35px rgba(255, 107, 107, 0.45);
      }

      .btn-save {
        background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
        color: white;
        border-color: transparent;
        box-shadow: 0 8px 25px rgba(76, 175, 80, 0.35);
      }

      .btn-save:hover {
        background: linear-gradient(135deg, #43a047 0%, #388e3c 100%);
        transform: translateY(-3px) scale(1.02);
        box-shadow: 0 12px 35px rgba(76, 175, 80, 0.45);
      }

      .btn:disabled {
        opacity: 0.6;
        cursor: not-allowed;
        transform: none !important;
        box-shadow: none !important;
      }

      /* Footer Actions */
      .footer-actions {
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(20px);
        border-top: 1px solid rgba(255, 255, 255, 0.2);
        padding: 16px 32px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.1);
        position: sticky;
        bottom: 0;
        min-height: 60px;
        max-height: 60px;
      }

      .footer-info {
        color: #7f8c8d;
        font-size: 14px;
        font-weight: 500;
      }

      /* Responsive Design */
      @media (max-width: 768px) {
        .settings-content {
          grid-template-columns: 1fr;
          gap: 20px;
          padding: 20px;
          max-height: calc(100vh - 150px);
        }
        
        .settings-header {
          padding: 20px;
          flex-direction: column;
          gap: 16px;
          text-align: center;
        }

        .settings-title {
          font-size: 24px;
        }

        .footer-actions {
          padding: 12px 20px;
          flex-direction: column;
          gap: 12px;
          min-height: 50px;
          max-height: 50px;
        }

        .action-buttons {
          flex-direction: column;
        }

        .btn {
          width: 100%;
          text-align: center;
        }

        .settings-section {
          max-height: 350px;
        }

        .radio-group {
          max-height: 200px;
        }

        .status-list {
          max-height: 120px;
        }
      }

      /* Scrollbar Styling */
      .settings-container::-webkit-scrollbar {
        width: 8px;
      }

      .settings-container::-webkit-scrollbar-track {
        background: rgba(255, 255, 255, 0.1);
        border-radius: 4px;
      }

      .settings-container::-webkit-scrollbar-thumb {
        background: rgba(255, 255, 255, 0.3);
        border-radius: 4px;
      }

      .settings-container::-webkit-scrollbar-thumb:hover {
        background: rgba(255, 255, 255, 0.5);
      }

      /* Loading Animation */
      .loading-spinner {
        width: 20px;
        height: 20px;
        border: 2px solid #ecf0f1;
        border-top: 2px solid #667eea;
        border-radius: 50%;
        animation: spin 1s linear infinite;
      }

      @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
      }

      /* Success/Error States */
      .success {
        border-color: #27ae60;
        background: rgba(39, 174, 96, 0.1);
      }

      .error {
        border-color: #e74c3c;
        background: rgba(231, 76, 60, 0.1);
      }

      .warning {
        border-color: #f39c12;
        background: rgba(243, 156, 18, 0.1);
      }
    </style>
  </head>
  <body>
    <div class="settings-container">
      <!-- Header -->
      <div class="settings-header">
        <h1 class="settings-title">AI Overlay Assistant Settings</h1>
        <div class="connection-status">
          <span class="status-dot" id="connection-status"></span>
          <span id="connection-text">Checking connection...</span>
        </div>
      </div>

      <!-- Main Content -->
      <div class="settings-content">
        <!-- AI Backend Configuration -->
        <div class="settings-section">
          <h2 class="section-title">
            <span style="font-size: 24px;">🤖</span>
            AI Backend Configuration
          </h2>
          
          <div class="form-group">
            <label class="form-label">Backend Selection</label>
            <div class="radio-group">
              <label class="radio-label">
                <input type="radio" name="backend" value="ollama" id="backend-ollama">
                <span>Ollama (Local AI)</span>
              </label>
              <label class="radio-label">
                <input type="radio" name="backend" value="gemini" id="backend-gemini">
                <span>Gemini (Cloud AI)</span>
              </label>
            </div>
          </div>

          <div class="form-group">
            <label for="model-name" class="form-label">Model Name</label>
            <input type="text" id="model-name" class="form-input" placeholder="e.g., llama3.2, gemini-1.5-flash">
          </div>

          <div class="form-group" id="api-key-section" style="display: none;">
            <label for="api-key" class="form-label">Gemini API Key</label>
            <input type="password" id="api-key" class="form-input" placeholder="Enter your Gemini API key">
            <div class="status-indicator" id="api-key-status">
              <span class="status-dot"></span>
              <span>API key not configured</span>
            </div>
          </div>
        </div>

        <!-- Overlay Configuration -->
        <div class="settings-section">
          <h2 class="section-title">
            <span style="font-size: 24px;">🎯</span>
            Overlay Settings
          </h2>
          
          <div class="form-group">
            <label class="form-label">Position</label>
            <div class="radio-group">
              <label class="radio-label">
                <input type="radio" name="position" value="center-top" id="position-center-top" checked>
                <span>Center Top</span>
              </label>
              <label class="radio-label">
                <input type="radio" name="position" value="top-right" id="position-top-right">
                <span>Top Right</span>
              </label>
              <label class="radio-label">
                <input type="radio" name="position" value="top-left" id="position-top-left">
                <span>Top Left</span>
              </label>
              <label class="radio-label">
                <input type="radio" name="position" value="bottom-right" id="position-bottom-right">
                <span>Bottom Right</span>
              </label>
              <label class="radio-label">
                <input type="radio" name="position" value="bottom-left" id="position-bottom-left">
                <span>Bottom Left</span>
              </label>
              <label class="radio-label">
                <input type="radio" name="position" value="center-right" id="position-center-right">
                <span>Center Right</span>
              </label>
              <label class="radio-label">
                <input type="radio" name="position" value="center-left" id="position-center-left">
                <span>Center Left</span>
              </label>
            </div>
          </div>

          <div class="form-group">
            <label class="form-label">Theme</label>
            <div class="radio-group">
              <label class="radio-label">
                <input type="radio" name="theme" value="auto" id="theme-auto">
                <span>Auto (System)</span>
              </label>
              <label class="radio-label">
                <input type="radio" name="theme" value="light" id="theme-light">
                <span>Light</span>
              </label>
              <label class="radio-label">
                <input type="radio" name="theme" value="dark" id="theme-dark">
                <span>Dark</span>
              </label>
            </div>
          </div>
        </div>

        <!-- Auto-Hide Configuration -->
        <div class="settings-section">
          <h2 class="section-title">
            <span style="font-size: 24px;">⏰</span>
            Auto-Hide Settings
          </h2>
          
          <div class="form-group">
            <label class="checkbox-label">
              <input type="checkbox" id="auto-hide-enabled">
              <span>Enable auto-hide</span>
            </label>
          </div>

          <div class="form-group" id="auto-hide-delay-group" style="display: none;">
            <label for="auto-hide-delay" class="form-label">Auto-hide delay (seconds)</label>
            <input type="number" id="auto-hide-delay" class="form-input" min="1" max="300" value="5">
          </div>

          <div class="form-group">
            <label class="checkbox-label">
              <input type="checkbox" id="auto-hide-after-response">
              <span>Auto-hide after AI response</span>
            </label>
          </div>

          <div class="form-group" id="auto-hide-delay-response-group" style="display: none;">
            <label for="auto-hide-delay-response" class="form-label">Delay after response (seconds)</label>
            <input type="number" id="auto-hide-delay-response" class="form-input" min="1" max="300" value="10">
          </div>
        </div>

        <!-- Backend Status -->
        <div class="settings-section">
          <h2 class="section-title">
            <span style="font-size: 24px;">📊</span>
            Backend Status
          </h2>
          
          <div class="status-indicator" id="backend-status">
            <span class="status-dot"></span>
            <span>Checking connection...</span>
          </div>

                  <div class="action-buttons">
          <button class="btn btn-secondary" id="test-backend-btn">
            <span>🧪</span>
            Test Connection
          </button>
          <button class="btn btn-secondary" id="refresh-status-btn">
            <span>🔄</span>
            Refresh Status
          </button>
        </div>
        </div>
      </div>

      <!-- Footer Actions -->
      <div class="footer-actions">
        <div class="footer-info">
          <span style="margin-right: 16px;">💡</span>
          Changes will be applied immediately
        </div>
        <div class="action-buttons">
          <button class="btn btn-cancel" id="cancel-btn">
            <span>✕</span>
            Cancel
          </button>
          <button class="btn btn-save" id="save-btn">
            <span>✓</span>
            Save Settings
          </button>
        </div>
      </div>
    </div>

    <script>
      // Auto-detect scrollable sections and add visual indicators
      document.addEventListener('DOMContentLoaded', function() {
        const sections = document.querySelectorAll('.settings-section');
        
        sections.forEach(section => {
          // Check if content overflows
          if (section.scrollHeight > section.clientHeight) {
            section.classList.add('scrollable');
          }
          
          // Listen for content changes
          const observer = new MutationObserver(() => {
            if (section.scrollHeight > section.clientHeight) {
              section.classList.add('scrollable');
            } else {
              section.classList.remove('scrollable');
            }
          });
          
          observer.observe(section, {
            childList: true,
            subtree: true
          });
        });
      });
    </script>
    <script src="settings.js"></script>
  </body>
</html>
