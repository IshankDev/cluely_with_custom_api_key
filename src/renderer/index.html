<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="AI Overlay Assistant - Intelligent clipboard processing" />
    <title>AI Overlay Assistant</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <!-- Main overlay container with high z-index for proper layering -->
    <div id="overlay-container" class="overlay-container" role="application" aria-label="AI Overlay Assistant">
      
      <!-- Response bubble with semantic structure -->
      <div id="response-bubble" class="response-bubble" role="region" aria-label="AI Response">
        
        <!-- Header with status and controls -->
        <header class="response-header">
          <div class="status-indicator" id="status-indicator" aria-label="Status">
            <span class="status-dot" id="status-dot"></span>
            <span class="status-text" id="status-text">Ready</span>
          </div>
          <div class="overlay-controls">
            <button
              id="settings-btn"
              class="control-btn settings-btn"
              title="Open settings"
              aria-label="Open settings"
            >
              <span class="btn-icon">‚öôÔ∏è</span>
            </button>
            <button
              id="minimize-btn"
              class="control-btn minimize-btn"
              title="Minimize overlay"
              aria-label="Minimize overlay"
            >
              <span class="btn-icon">‚àí</span>
            </button>
            <button 
              id="close-btn" 
              class="control-btn close-btn" 
              title="Close overlay"
              aria-label="Close overlay"
            >
              <span class="btn-icon">√ó</span>
            </button>
          </div>
        </header>

        <!-- Main content area -->
        <main class="response-content">
          <div id="response-text" class="response-text" role="log" aria-live="polite">
            Ready for AI assistance...
          </div>
          
          <!-- Loading indicator -->
          <div id="loading-indicator" class="loading-indicator" aria-hidden="true">
            <div class="loading-spinner"></div>
            <span class="loading-text">Processing...</span>
          </div>
        </main>

        <!-- Footer with additional controls -->
        <footer class="response-footer" aria-hidden="true">
          <div class="footer-controls">
            <button id="copy-btn" class="footer-btn" title="Copy response" aria-label="Copy response">
              <span class="btn-icon">üìã</span>
            </button>
            <button id="clear-btn" class="footer-btn" title="Clear response" aria-label="Clear response">
              <span class="btn-icon">üóëÔ∏è</span>
            </button>
            <button id="process-clipboard-btn" class="footer-btn" title="Process clipboard" aria-label="Process clipboard">
              <span class="btn-icon">ü§ñ</span>
            </button>
          </div>
        </footer>
      </div>

      <!-- Settings Panel -->
      <div id="settings-panel" class="settings-panel" role="dialog" aria-label="Settings" aria-hidden="true">
        <div class="settings-header">
          <h3 class="settings-title">Settings</h3>
          <button id="close-settings-btn" class="control-btn close-btn" title="Close settings" aria-label="Close settings">
            <span class="btn-icon">√ó</span>
          </button>
        </div>
        
        <div class="settings-content">
          <!-- Backend Selection -->
          <div class="settings-section">
            <h4 class="section-title">AI Backend</h4>
            <div class="backend-selection">
              <label class="radio-label">
                <input type="radio" name="backend" value="ollama" id="backend-ollama" class="radio-input">
                <span class="radio-custom"></span>
                <span class="radio-text">Ollama (Local)</span>
              </label>
              <label class="radio-label">
                <input type="radio" name="backend" value="gemini" id="backend-gemini" class="radio-input">
                <span class="radio-custom"></span>
                <span class="radio-text">Gemini (Cloud)</span>
              </label>
            </div>
            <div class="validation-error" id="backend-validation-error" style="display: none;"></div>
          </div>

          <!-- Model Configuration -->
          <div class="settings-section">
            <h4 class="section-title">Model Configuration</h4>
            <div class="form-group">
              <label for="model-name" class="form-label">Model Name</label>
              <input type="text" id="model-name" class="form-input" placeholder="e.g., llama3.2, gemini-1.5-flash">
              <div class="form-help">Enter the model name for your selected backend</div>
              <div class="validation-error" id="model-validation-error" style="display: none;"></div>
            </div>
          </div>

          <!-- API Key Configuration (Gemini only) -->
          <div class="settings-section" id="api-key-section" style="display: none;">
            <h4 class="section-title">API Key Configuration</h4>
            <div class="form-group">
              <label for="api-key" class="form-label">Gemini API Key</label>
              <div class="api-key-input-group">
                <input type="password" id="api-key" class="form-input" placeholder="Enter your Gemini API key">
                <button id="toggle-api-key-btn" class="toggle-btn" title="Show/hide API key" aria-label="Show/hide API key">
                  <span class="btn-icon">üëÅÔ∏è</span>
                </button>
              </div>
              <div class="form-help">Your API key is stored securely using system encryption</div>
              <div class="validation-error" id="api-key-validation-error" style="display: none;"></div>
            </div>
            
            <!-- API Key Status -->
            <div class="api-key-status" id="api-key-status">
              <div class="status-item">
                <span class="status-icon" id="api-key-status-icon">‚è≥</span>
                <span class="status-text" id="api-key-status-text">Checking API key...</span>
              </div>
            </div>

            <!-- API Key Actions -->
            <div class="api-key-actions">
              <button id="test-api-key-btn" class="action-btn secondary-btn" disabled>
                <span class="btn-icon">üß™</span>
                Test Connection
              </button>
              <button id="validate-api-key-btn" class="action-btn secondary-btn" disabled>
                <span class="btn-icon">‚úì</span>
                Validate Key
              </button>
            </div>
          </div>

          <!-- Backend Status -->
          <div class="settings-section">
            <h4 class="section-title">Backend Status</h4>
            <div class="backend-status" id="backend-status">
              <div class="status-item">
                <span class="status-icon" id="backend-status-icon">‚è≥</span>
                <span class="status-text" id="backend-status-text">Checking connection...</span>
              </div>
            </div>
            <div class="backend-actions">
              <button id="test-backend-btn" class="action-btn secondary-btn">
                <span class="btn-icon">üîç</span>
                Test Connection
              </button>
              <button id="refresh-status-btn" class="action-btn secondary-btn">
                <span class="btn-icon">üîÑ</span>
                Refresh Status
              </button>
            </div>
          </div>

          <!-- Save/Cancel Buttons -->
          <div class="settings-actions">
            <button id="save-settings-btn" class="action-btn primary-btn">
              <span class="btn-icon">üíæ</span>
              Save Settings
            </button>
            <button id="cancel-settings-btn" class="action-btn secondary-btn">
              Cancel
            </button>
          </div>
        </div>
      </div>

      <!-- Minimized state indicator -->
      <div id="minimized-indicator" class="minimized-indicator" aria-hidden="true">
        <div class="minimized-icon">ü§ñ</div>
        <span class="minimized-text">AI Assistant</span>
      </div>
    </div>

    <script src="renderer.js"></script>
  </body>
</html>
